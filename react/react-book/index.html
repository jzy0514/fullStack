<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <div class="wrapper">
    <!-- <button class="like-btn">
      <span class="like-text">ç‚¹èµ</span>
      <span>ğŸ‘</span>
    </button> -->
  </div>
  <script>
  //æŒ‚è½½ç‚¹ mountåˆ°æ ¹èŠ‚ç‚¹ä¸Š
    const wrapper = document.querySelector('.wrapper');
    //  String -> DOM ä¸€æ¬¡æ€§çš„æŠŠstr æ”¾åˆ°DOM 
    const createDOMFromString = (domString) => {
      // DOM æ¯”htmlString å¥½çš„åœ°æ–¹åœ¨äºï¼Œ jsæ“ä½œ
      const div = document.createElement('div');
      div.innerHTML = domString;
      return div;
    }
    class LikeBUtton{
      constructor() {
        this.state = {
          isLiked: false
        }
      }
      // ä¹‹å‰çš„DOM template å¿…å¤‡çš„æ–¹æ³•
      changeLikeText() {
        // console.log(this.el);
        // å¤ªå¤šçš„DOMäº†
        this.setState({
          isLiked: !this.state.isLiked
        })
        // const likeText = this.el.querySelector('.like-text');
        // this.state.isLiked = !this.state.isLiked;
        // likeText.innerHTML = this.state.isLiked?'å–æ¶ˆ':'ç‚¹èµ' 
      }
      setState(state) {
        // å°†çŠ¶æ€æ›´æ–°
        // VM æ¨¡å‹ this.state View è§†å›¾çš„å®æ—¶å¯¹åº”
        const oldEl = this.el
        this.state = state;
        this.el = this.render();
        // DOMæ›´æ–°
        if (this.onStateChange) {
          this.onStateChange(oldEl, this.el)
        }
      }
      render() {
        this.el = createDOMFromString(`
          <button id="like-btn">
            <span class="like-text">${this.state.isLiked?'å–æ¶ˆ':'ç‚¹èµ'}</span>
          </button>
        `)
        this.el.addEventListener('click', this.changeLikeText.bind(this), false);
        return this.el;
      }
    }
    const LikeBUtton1 = new LikeBUtton();
    wrapper.appendChild(LikeBUtton1.render());
    LikeBUtton1.onStateChange = (oldEl, newEL) => {
      wrapper.insertBefore(newEL, oldEl);
      wrapper.removeChild(oldEl);
    }
    const LikeBUtton2 = new LikeBUtton();
    wrapper.appendChild(LikeBUtton2.render());
  </script>
  <!-- <script>
  const button = document.querySelector('.like-btn');
  const buttonText = button.querySelector('.like-text');
  let isLiked = false;
  button.addEventListener('click', () => {
    isLiked = !isLiked
    if (isLiked) {
      buttonText.innerHTML = 'å–æ¶ˆ'
    } else {
      buttonText.innerHTML = 'æˆåŠŸ'
      
    }
  })
  </script> -->
</body>
</html>